# 2.7 Ledger Model — Double Entry (Beginner-Friendly)

Ethian uses a **double-entry ledger model** to represent all money movement.
This ensures financial correctness and prevents money from being created or lost.

In double-entry accounting:
- every debit has a corresponding credit,
- the sum of debits equals the sum of credits.

---

## 2.7.1 Why Ethian needs a Ledger

Payment state alone is not sufficient for financial truth.

Reasons:
- Payments can fail, retry, or be refunded.
- Settlement happens later than capture.
- Auditors and reconciliation require immutable records.

The ledger is the **system of record** for money.

---

## 2.7.2 Core Ledger Concepts

### Ledger Account

A named bucket representing a financial category.

Examples:
- Merchant Receivable
- Platform Revenue
- Customer Cash
- Settlement Clearing
- Bank Cash

Ledger accounts have a **type**:
- Asset
- Liability
- Revenue
- Expense

---

### Ledger Entry

A single debit or credit applied to a ledger account.

Attributes:
- ledgerAccount
- amount (Money)
- direction (DEBIT or CREDIT)
- reference (paymentId / refundId / settlementId)

A ledger entry is **never standalone**.

---

### Ledger Transaction (Posting)

A ledger transaction is a **group of ledger entries** that must balance.

Rules:
- Sum(debits) == Sum(credits)
- Posted atomically (all entries or none)
- Immutable once recorded (append-only)

---

## 2.7.3 Example: Payment Capture Posting

When a payment is captured:

Debit:
- Customer Cash (Asset)

Credit:
- Merchant Receivable (Liability)

---

## 2.7.4 Example: Platform Fee Deduction

Debit:
- Merchant Receivable

Credit:
- Platform Revenue

---

## 2.7.5 Example: Settlement Posting

Debit:
- Merchant Receivable

Credit:
- Bank Cash

---

## 2.7.6 Example: Refund Posting

Debit:
- Merchant Receivable (or Platform Clearing)

Credit:
- Customer Cash

---

## 2.7.7 Ledger Invariants

- Every posting is balanced.
- Ledger entries are append-only.
- Ledger entries reference a valid business event.
- Ledger is the single source of financial truth.

---

## 2.7.8 Relationship with Domain Events

Ledger postings are triggered by domain events such as:
- Payment CAPTURED
- Payment REFUNDED
- Settlement PAID

Events are defined in **2.9 Domain Events Model**.

---

## Summary

The ledger enforces financial correctness and auditability.

Next: see **2.8 Invariants Summary Table**.