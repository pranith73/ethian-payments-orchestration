erDiagram
    MERCHANT ||--o{ INVOICE : issues
    MERCHANT ||--o{ PAYMENT : receives
    MERCHANT ||--o{ SETTLEMENT : paid_through
    MERCHANT ||--o{ LEDGER_ENTRY : has

    CUSTOMER ||--o{ INVOICE : billed_for
    CUSTOMER ||--o{ PAYMENT : initiates

    PRODUCT }o--o{ INVOICE : appears_on

    INVOICE ||--o{ PAYMENT : paid_by

    PAYMENT ||--o{ LEDGER_ENTRY : produces
    SETTLEMENT ||--o{ PAYMENT : bundles
    SETTLEMENT ||--o{ LEDGER_ENTRY : records

    PAYMENT ||--o{ DOMAIN_EVENT : emits
    INVOICE ||--o{ DOMAIN_EVENT : emits
    SETTLEMENT ||--o{ DOMAIN_EVENT : emits
